---
title: "Assignment3"
author: "sl3641"
date: "October 20, 2014"
output: html_document
published: false
tags: hw3
---

For this assignment, I am comparing responses from 
<ol> <li>Wave 6 (2010) 
<li> Wave 5 (2005) of the World Values Survey administered in South Korea.
</ol>

References and links can be found at the end of this document.

<b>Research Question</b>
<br> Specifically, I wanted to see how attitudes towards the importance of the economy (versus other national priorities) have changed over time.
My hypothesis is that as South Korea's economic conditions improve over time, individuals will place more importance on other values such as a more humane society.

The relevant question from the World Values Survey is below:

<i> People sometimes talk about what the aims of this country should be for the next ten years.  On this card are listed some of the goals which different people would give top priority.
Would you please say which of these you, yourself, consider the most important? ...
<li> A stable economy
<li> Progress toward a less impersonal and more humane society
<li> Progress toward a society in which ideas count more than money
<li> The fight against crime
</i> 

This is the script that reads, transforms, and prepares data for the graph.
<br> The description of variables is in the comments.
```{r PrepareData}
setwd("~/Documents/qmssviz_other/Assignment3")
wv5 <- read.csv("WV5_Data_South_Korea.csv")   # read Wave 5 data
wv6 <- read.csv("WV6_Data_South_Korea.csv")   # read Wave 6 data

econwv5 <- wv5[,c("V1", "V73")]      # extract year and question of interest
colnames(econwv5) <- (c("wave", "imp1"))     # rename variables
econwv6 <- wv6[,c("V1", "V64")]      # extract year and question of interest
colnames(econwv6) <- (c("wave", "imp1"))     # rename variables

all <- rbind(econwv5, econwv6)    # combine data from wv5 and wv6

# create a new variable, recoding the responses that had been entered as numbers back into text format
all$label <- ifelse(all$imp1==1, "stable economy",    
                    ifelse(all$imp1==2, "more humane society",
                           ifelse(all$imp1==3, "ideas more than money", 
                                  ifelse(all$imp1==4, "fight against crime", "no answer"))))

# calculate total number of responses by answer choice and wave
summ <- as.data.frame(table(all$wave, all$label))   

# rename variables in dataframe generated by using table() function above
colnames(summ) <- c("wave", "question", "freq") 

# calculate proportion of respondents who selected a particular response
summ$percent <- summ$freq/1200 * 100    

# generate variable recoding wave into year
summ$year <- ifelse(summ$wave==5, "2005", "2010")
```

This is the final dataset that we are using for the graph
<ul>
- wave: wave is a factor variable, with "1" referring to Wave 5, and "2" referring to Wave 6
- question: this is a factor variable representing the four possible responses to the question of interest
- freq: indicates the number of people out of 1,200 respondents who selected a certain response
- percent: this is the percentage of 1,200 respondents who indicated a specific response 
- year: this is a character variable indicating the year of the survey (2005 or 2010)
</ul>

``` {r Finaldata}
summ
```

This creates the graph. 
```{r CreateGraph1, fig.width = 9, fig.height = 5}
require("ggplot2")
ggplot(summ, aes(x=question, y=percent)) + 
  geom_point(aes(size=2, alpha=year)) + 
  coord_flip() + 
  theme_bw() +
  theme(axis.title.y = element_blank(), panel.border=element_blank()) + 
  scale_size(guide="none") + 
  ylab("% of respondents") + 
  ggtitle("Which goals do you consider the most important?") +
  scale_x_discrete(limits=c("no answer", "ideas more than money", 
                            "fight against crime", "more humane society", "stable economy"))
```

The plot appears to agree with the initial hypothesis.  
<br>Comparing 2010 to 2005, a smaller proportion of respondents indicated that a stable economy is the most important national priority among the four goals listed.
<br> There was an increase in the proportion of respondents who indicated either that a more humane society or the fight against crime was the most important national priority.
<br> In addition, the graph shows that there was no significant change in the proportion of respondents who indicated that "Progress toward a society in which ideas count more than money"

Below are expressive fantasy function calls describing how I read, transformed, and prepared the data for the graph.
``` {r FantasyFunction, eval=FALSE}
wave5 <- read.csv("filepath")   # read Wave 5 data
wave6 <- read.csv("filepath")   # read Wave 6 data

wave5 <- getVariables(wave5, listOfVariables)  # extract variables of interest (from Wave 5)
wave6 <- getVariables(wave6, listOfVariables)  # extract variables of interest (from Wave 6)

renameValues(wave5, wave6, nameOfVariables)  # rename variables in both wave5 and wave6 dataframes

all <- rbind(econwv5, econwv6)    # combine data from wv5 and wv6

# add labels to responses which were coded as numbers
all <- recodeResponses(variables, labels)

# produce final dataset with frequency and % counts
final <- makeFinalDataSet(year, question)

# generate final dot chart
visualization <- makeFinalChart(question, percent, ...)
```

This is my attempt at writing a function that renames the columns (i.e. variables) for the two datasets, combines them, and then produces the combined dataset.
```{r}
variablenames <- c("wave", "Q1")

renameAndCombine <- function(econwv5, econwv6, variablenames){
  colnames(econwv5) <- variablenames
  colnames(econwv6) <- variablenames
  all <- rbind(econwv5, econwv6)
  assign("all", all, envir=globalenv())
}

# Testing my function to see if it produces 'all' dataset
renameAndCombine(econwv5, econwv6, variablenames)
```

References:
<li> http://www.worldvaluessurvey.org/WVSDocumentationWV6.jsp
<li> Title: South Korea 2010
<li> Field-work dates: 27-02-2010 to 08-03-2010
<li> Institute: Korean Social Science Data Center(KSDC)
<li> PI Prof Soo Young Auh

<li> http://www.worldvaluessurvey.org/WVSDocumentationWV5.jsp
<li> Title: South Korea 2005
<li> Field-work dates: 01-12-2005 to 15-12-2005
<li> Institute: Korean Social Science Data Center(KSDC)
<li> PI Prof Soo Young Auh